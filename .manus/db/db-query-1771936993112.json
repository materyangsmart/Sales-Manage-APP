{
  "query": "CREATE TABLE IF NOT EXISTS customer_credit_scores (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  customer_id INT NOT NULL UNIQUE COMMENT '客户ID',\n  customer_name VARCHAR(255) NOT NULL COMMENT '客户名称',\n  credit_score INT NOT NULL DEFAULT 60 COMMENT '信用评分（0-100）',\n  credit_level ENUM('S', 'A', 'B', 'C', 'D') NOT NULL DEFAULT 'C' COMMENT '信用等级',\n  total_orders INT NOT NULL DEFAULT 0 COMMENT '历史订单总数',\n  total_amount DECIMAL(15, 2) NOT NULL DEFAULT 0 COMMENT '历史交易总额',\n  paid_amount DECIMAL(15, 2) NOT NULL DEFAULT 0 COMMENT '已回款总额',\n  payment_rate DECIMAL(5, 2) NOT NULL DEFAULT 0 COMMENT '回款率（%）',\n  overdue_count INT NOT NULL DEFAULT 0 COMMENT '逾期次数',\n  max_overdue_days INT NOT NULL DEFAULT 0 COMMENT '最大逾期天数',\n  last_order_date DATE NULL COMMENT '最后订单日期',\n  auto_approve_enabled BOOLEAN DEFAULT FALSE COMMENT '是否启用自动审批',\n  auto_approve_limit DECIMAL(10, 2) DEFAULT 0 COMMENT '自动审批额度上限',\n  last_calculated_at TIMESTAMP NULL COMMENT '最后计算时间',\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  INDEX idx_customer_id (customer_id),\n  INDEX idx_credit_level (credit_level),\n  INDEX idx_payment_rate (payment_rate)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='客户信用评分表';\n\nCREATE TABLE IF NOT EXISTS auto_approval_logs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  order_id INT NOT NULL COMMENT '订单ID',\n  customer_id INT NOT NULL COMMENT '客户ID',\n  customer_name VARCHAR(255) NOT NULL COMMENT '客户名称',\n  order_amount DECIMAL(10, 2) NOT NULL COMMENT '订单金额',\n  credit_score INT NOT NULL COMMENT '当时的信用评分',\n  credit_level VARCHAR(10) NOT NULL COMMENT '当时的信用等级',\n  payment_rate DECIMAL(5, 2) NOT NULL COMMENT '当时的回款率',\n  auto_approve_limit DECIMAL(10, 2) NOT NULL COMMENT '自动审批额度上限',\n  decision ENUM('APPROVED', 'REJECTED', 'MANUAL') NOT NULL COMMENT '决策结果',\n  decision_reason TEXT NOT NULL COMMENT '决策原因',\n  processing_time_ms INT NOT NULL COMMENT '处理耗时（毫秒）',\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  INDEX idx_order_id (order_id),\n  INDEX idx_customer_id (customer_id),\n  INDEX idx_decision (decision),\n  INDEX idx_created_at (created_at)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='自动审批日志表';\n\nCREATE TABLE IF NOT EXISTS role_permissions (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  role_name VARCHAR(50) NOT NULL COMMENT '角色名称',\n  permission_key VARCHAR(100) NOT NULL COMMENT '权限键',\n  permission_name VARCHAR(255) NOT NULL COMMENT '权限名称',\n  permission_type ENUM('READ', 'WRITE', 'DELETE', 'APPROVE') NOT NULL COMMENT '权限类型',\n  resource_type VARCHAR(50) NOT NULL COMMENT '资源类型（orders, invoices, payments等）',\n  is_active BOOLEAN DEFAULT TRUE COMMENT '是否启用',\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  UNIQUE KEY uk_role_permission (role_name, permission_key),\n  INDEX idx_role_name (role_name),\n  INDEX idx_resource_type (resource_type)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='角色权限映射表';",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 45bMcCwxMseth2N.16417d1fde85 --database 8QpTLEs6K9fws4ZFuDGLC4 --execute CREATE TABLE IF NOT EXISTS customer_credit_scores (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  customer_id INT NOT NULL UNIQUE COMMENT '客户ID',\n  customer_name VARCHAR(255) NOT NULL COMMENT '客户名称',\n  credit_score INT NOT NULL DEFAULT 60 COMMENT '信用评分（0-100）',\n  credit_level ENUM('S', 'A', 'B', 'C', 'D') NOT NULL DEFAULT 'C' COMMENT '信用等级',\n  total_orders INT NOT NULL DEFAULT 0 COMMENT '历史订单总数',\n  total_amount DECIMAL(15, 2) NOT NULL DEFAULT 0 COMMENT '历史交易总额',\n  paid_amount DECIMAL(15, 2) NOT NULL DEFAULT 0 COMMENT '已回款总额',\n  payment_rate DECIMAL(5, 2) NOT NULL DEFAULT 0 COMMENT '回款率（%）',\n  overdue_count INT NOT NULL DEFAULT 0 COMMENT '逾期次数',\n  max_overdue_days INT NOT NULL DEFAULT 0 COMMENT '最大逾期天数',\n  last_order_date DATE NULL COMMENT '最后订单日期',\n  auto_approve_enabled BOOLEAN DEFAULT FALSE COMMENT '是否启用自动审批',\n  auto_approve_limit DECIMAL(10, 2) DEFAULT 0 COMMENT '自动审批额度上限',\n  last_calculated_at TIMESTAMP NULL COMMENT '最后计算时间',\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  INDEX idx_customer_id (customer_id),\n  INDEX idx_credit_level (credit_level),\n  INDEX idx_payment_rate (payment_rate)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='客户信用评分表';\n\nCREATE TABLE IF NOT EXISTS auto_approval_logs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  order_id INT NOT NULL COMMENT '订单ID',\n  customer_id INT NOT NULL COMMENT '客户ID',\n  customer_name VARCHAR(255) NOT NULL COMMENT '客户名称',\n  order_amount DECIMAL(10, 2) NOT NULL COMMENT '订单金额',\n  credit_score INT NOT NULL COMMENT '当时的信用评分',\n  credit_level VARCHAR(10) NOT NULL COMMENT '当时的信用等级',\n  payment_rate DECIMAL(5, 2) NOT NULL COMMENT '当时的回款率',\n  auto_approve_limit DECIMAL(10, 2) NOT NULL COMMENT '自动审批额度上限',\n  decision ENUM('APPROVED', 'REJECTED', 'MANUAL') NOT NULL COMMENT '决策结果',\n  decision_reason TEXT NOT NULL COMMENT '决策原因',\n  processing_time_ms INT NOT NULL COMMENT '处理耗时（毫秒）',\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  INDEX idx_order_id (order_id),\n  INDEX idx_customer_id (customer_id),\n  INDEX idx_decision (decision),\n  INDEX idx_created_at (created_at)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='自动审批日志表';\n\nCREATE TABLE IF NOT EXISTS role_permissions (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  role_name VARCHAR(50) NOT NULL COMMENT '角色名称',\n  permission_key VARCHAR(100) NOT NULL COMMENT '权限键',\n  permission_name VARCHAR(255) NOT NULL COMMENT '权限名称',\n  permission_type ENUM('READ', 'WRITE', 'DELETE', 'APPROVE') NOT NULL COMMENT '权限类型',\n  resource_type VARCHAR(50) NOT NULL COMMENT '资源类型（orders, invoices, payments等）',\n  is_active BOOLEAN DEFAULT TRUE COMMENT '是否启用',\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  UNIQUE KEY uk_role_permission (role_name, permission_key),\n  INDEX idx_role_name (role_name),\n  INDEX idx_resource_type (resource_type)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='角色权限映射表';",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2451
}