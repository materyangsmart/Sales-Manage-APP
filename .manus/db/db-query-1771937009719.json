{
  "query": "CREATE TABLE IF NOT EXISTS permission_change_logs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT NOT NULL COMMENT '用户ID',\n  user_name VARCHAR(255) NOT NULL COMMENT '用户姓名',\n  old_role VARCHAR(50) NULL COMMENT '旧角色',\n  new_role VARCHAR(50) NOT NULL COMMENT '新角色',\n  old_permissions TEXT NULL COMMENT '旧权限列表（JSON）',\n  new_permissions TEXT NOT NULL COMMENT '新权限列表（JSON）',\n  changed_by INT NOT NULL COMMENT '操作人ID',\n  changed_by_name VARCHAR(255) NOT NULL COMMENT '操作人姓名',\n  change_reason TEXT NULL COMMENT '变更原因',\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  INDEX idx_user_id (user_id),\n  INDEX idx_changed_by (changed_by),\n  INDEX idx_created_at (created_at)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='权限变更审计表';\n\nCREATE TABLE IF NOT EXISTS batch_trace (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  batch_no VARCHAR(50) NOT NULL UNIQUE COMMENT '批次号',\n  production_date DATE NOT NULL COMMENT '生产日期',\n  soybean_batch VARCHAR(50) NOT NULL COMMENT '黄豆批次号',\n  soybean_supplier VARCHAR(255) NOT NULL COMMENT '黄豆供应商',\n  soybean_weight DECIMAL(10, 2) NOT NULL COMMENT '黄豆投入量（kg）',\n  water_quality_report VARCHAR(255) NULL COMMENT '水质检测报告编号',\n  product_output DECIMAL(10, 2) NOT NULL COMMENT '成品产出量（kg）',\n  yield_rate DECIMAL(5, 2) NOT NULL COMMENT '得率（%）',\n  workshop_temp DECIMAL(5, 2) NULL COMMENT '车间温度（℃）',\n  sterilization_params VARCHAR(255) NULL COMMENT '灭菌参数',\n  inspector_id INT NOT NULL COMMENT '质检员ID',\n  inspector_name VARCHAR(255) NOT NULL COMMENT '质检员姓名',\n  quality_status ENUM('PASS', 'FAIL') NOT NULL DEFAULT 'PASS' COMMENT '质检状态',\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  INDEX idx_batch_no (batch_no),\n  INDEX idx_production_date (production_date),\n  INDEX idx_quality_status (quality_status)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='生产批次追溯表';\n\nCREATE TABLE IF NOT EXISTS quality_complaints (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  order_id INT NOT NULL COMMENT '订单ID',\n  batch_no VARCHAR(50) NULL COMMENT '批次号',\n  customer_name VARCHAR(255) NOT NULL COMMENT '投诉人姓名',\n  customer_phone VARCHAR(20) NULL COMMENT '投诉人电话',\n  complaint_type ENUM('QUALITY', 'SERVICE', 'DELIVERY', 'OTHER') NOT NULL COMMENT '投诉类型',\n  complaint_content TEXT NOT NULL COMMENT '投诉内容',\n  complaint_images TEXT NULL COMMENT '投诉图片（JSON数组）',\n  driver_id INT NULL COMMENT '配送司机ID',\n  driver_name VARCHAR(255) NULL COMMENT '配送司机姓名',\n  sales_rep_id INT NULL COMMENT '业务员ID',\n  sales_rep_name VARCHAR(255) NULL COMMENT '业务员姓名',\n  status ENUM('PENDING', 'PROCESSING', 'RESOLVED', 'CLOSED') DEFAULT 'PENDING' COMMENT '处理状态',\n  assigned_to INT NULL COMMENT '分配给（处理人ID）',\n  assigned_to_name VARCHAR(255) NULL COMMENT '处理人姓名',\n  resolution TEXT NULL COMMENT '处理结果',\n  resolved_at TIMESTAMP NULL COMMENT '处理完成时间',\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  INDEX idx_order_id (order_id),\n  INDEX idx_batch_no (batch_no),\n  INDEX idx_status (status),\n  INDEX idx_created_at (created_at)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='质量投诉表';",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 45bMcCwxMseth2N.16417d1fde85 --database 8QpTLEs6K9fws4ZFuDGLC4 --execute CREATE TABLE IF NOT EXISTS permission_change_logs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT NOT NULL COMMENT '用户ID',\n  user_name VARCHAR(255) NOT NULL COMMENT '用户姓名',\n  old_role VARCHAR(50) NULL COMMENT '旧角色',\n  new_role VARCHAR(50) NOT NULL COMMENT '新角色',\n  old_permissions TEXT NULL COMMENT '旧权限列表（JSON）',\n  new_permissions TEXT NOT NULL COMMENT '新权限列表（JSON）',\n  changed_by INT NOT NULL COMMENT '操作人ID',\n  changed_by_name VARCHAR(255) NOT NULL COMMENT '操作人姓名',\n  change_reason TEXT NULL COMMENT '变更原因',\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  INDEX idx_user_id (user_id),\n  INDEX idx_changed_by (changed_by),\n  INDEX idx_created_at (created_at)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='权限变更审计表';\n\nCREATE TABLE IF NOT EXISTS batch_trace (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  batch_no VARCHAR(50) NOT NULL UNIQUE COMMENT '批次号',\n  production_date DATE NOT NULL COMMENT '生产日期',\n  soybean_batch VARCHAR(50) NOT NULL COMMENT '黄豆批次号',\n  soybean_supplier VARCHAR(255) NOT NULL COMMENT '黄豆供应商',\n  soybean_weight DECIMAL(10, 2) NOT NULL COMMENT '黄豆投入量（kg）',\n  water_quality_report VARCHAR(255) NULL COMMENT '水质检测报告编号',\n  product_output DECIMAL(10, 2) NOT NULL COMMENT '成品产出量（kg）',\n  yield_rate DECIMAL(5, 2) NOT NULL COMMENT '得率（%）',\n  workshop_temp DECIMAL(5, 2) NULL COMMENT '车间温度（℃）',\n  sterilization_params VARCHAR(255) NULL COMMENT '灭菌参数',\n  inspector_id INT NOT NULL COMMENT '质检员ID',\n  inspector_name VARCHAR(255) NOT NULL COMMENT '质检员姓名',\n  quality_status ENUM('PASS', 'FAIL') NOT NULL DEFAULT 'PASS' COMMENT '质检状态',\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  INDEX idx_batch_no (batch_no),\n  INDEX idx_production_date (production_date),\n  INDEX idx_quality_status (quality_status)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='生产批次追溯表';\n\nCREATE TABLE IF NOT EXISTS quality_complaints (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  order_id INT NOT NULL COMMENT '订单ID',\n  batch_no VARCHAR(50) NULL COMMENT '批次号',\n  customer_name VARCHAR(255) NOT NULL COMMENT '投诉人姓名',\n  customer_phone VARCHAR(20) NULL COMMENT '投诉人电话',\n  complaint_type ENUM('QUALITY', 'SERVICE', 'DELIVERY', 'OTHER') NOT NULL COMMENT '投诉类型',\n  complaint_content TEXT NOT NULL COMMENT '投诉内容',\n  complaint_images TEXT NULL COMMENT '投诉图片（JSON数组）',\n  driver_id INT NULL COMMENT '配送司机ID',\n  driver_name VARCHAR(255) NULL COMMENT '配送司机姓名',\n  sales_rep_id INT NULL COMMENT '业务员ID',\n  sales_rep_name VARCHAR(255) NULL COMMENT '业务员姓名',\n  status ENUM('PENDING', 'PROCESSING', 'RESOLVED', 'CLOSED') DEFAULT 'PENDING' COMMENT '处理状态',\n  assigned_to INT NULL COMMENT '分配给（处理人ID）',\n  assigned_to_name VARCHAR(255) NULL COMMENT '处理人姓名',\n  resolution TEXT NULL COMMENT '处理结果',\n  resolved_at TIMESTAMP NULL COMMENT '处理完成时间',\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  INDEX idx_order_id (order_id),\n  INDEX idx_batch_no (batch_no),\n  INDEX idx_status (status),\n  INDEX idx_created_at (created_at)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='质量投诉表';",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2432
}